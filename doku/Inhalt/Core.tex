\chapter{Core Bibliothek}
\label{cha:Core-Bib}
Wir haben schon früh festgestellt, dass es eine Vielzahl an Strukturen und Funktionalitäten geben wird, 
die sowohl in der Collector-Applikation als auch in unserer Navigator-Applikation für den Endbenutzer Anwendung finden.
Dementsprechend haben wir diese in eine eigene Android-Bibliothek ausgelagert, die wir wiederum in unsere Android-Applikationen einbinden konnten.
Zu den Kernfunktionalitäten und -Strukturen gehören unter anderem folgende:
\begin{itemize}
\item Grundlegende Definitionen einer Karte, eines Stockwerks oder eines Knotens
\item Konstanten für die Kommunikation mit dem Webservice
\item Ein Errorhandler für alle grundlegenden Fehler
\item Snippets zur einfachen Kommunikation mit dem Benutzer mittels Dialogen
\item Abbildung des Webservices zur vereinfachten Nutzung
\item Javascript-Schnittstellendefinitionen für die Interaktion auf der Karte
\item Asynchrone Tasks für Webservicekommunikation inkl. entsprechender Listener
\end{itemize}

\section{Map Webview}
\label{cha:MapWebview}
Zur Anzeige der Karte in einer Webview oder einem Browser, nutzen wir die Bibliothek
\textit{D3.js}\footnote{\href{http://d3js.org/}{http://d3js.org/}}
und \textit{Floor Plan}\footnote{\href{http://dciarletta.github.io/d3-floorplan/}{http://dciarletta.github.io/d3-floorplan/}}. Dies ermöglicht uns mit Hilfe von Pitch und Zoom-Gesten eine Touch-Navigation auf der Karte.

\textit{D3} ist eine Javascript Bibliothek zur Anzeige von Graphen und Bildern, die durch das \textit{Floor Plan} Plugin um eine Indoor-Komponente erweitert wurde. Dies realisiert \textit{D3} über ein SVG Bild.

Wir haben zusätzliche Funktionen ergänzt, die es uns ermöglichen, einen Graphen mit Knoten und Kanten  SVG Kreis- und Linienelemente abzubilden. Außerdem gibt es die Möglichkeiten, Punkte zu highlighten, einen Start und
Endpunkt zur Navigation zu setzen, zu einem Punkt zu zoomen und die Karte zurückzusetzen.

Eine genauere Übersicht über die Schnittstellenbeschreibung ist im Anhang \nameref{cha:jsSchnittstelle} enthalten.